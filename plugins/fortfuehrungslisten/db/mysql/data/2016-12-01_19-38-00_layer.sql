INSERT INTO `u_groups` (`Gruppenname`, `Gruppenname_low-german`, `Gruppenname_english`, `Gruppenname_polish`, `Gruppenname_vietnamese`, `obergruppe`, `order`) VALUES
('Fortführungslisten', NULL, NULL, NULL, NULL, NULL, 5);

SET @group_id = LAST_INSERT_ID();
SET @connection = 'host=pgsql user=xxxx password=xxxx dbname=kvwmapsp';

INSERT INTO layer (`Name`,`alias`,`Datentyp`,`Gruppe`,`pfad`,`maintable`,`Data`,`schema`,`document_path`,`tileindex`,`tileitem`,`labelangleitem`,`labelitem`,`labelmaxscale`,`labelminscale`,`labelrequires`,`connection`,`printconnection`,`connectiontype`,`classitem`,`filteritem`,`tolerance`,`toleranceunits`,`epsg_code`,`template`,`queryable`,`transparency`,`drawingorder`,`minscale`,`maxscale`,`offsite`,`ows_srs`,`wms_name`,`wms_server_version`,`wms_format`,`wms_connectiontimeout`,`wms_auth_username`,`wms_auth_password`,`wfs_geom`,`selectiontype`,`querymap`,`logconsume`,`processing`,`kurzbeschreibung`,`datenherr`,`metalink`,`privileg`) VALUES('Fortführungsfälle','','5',@group_id,'SELECT id AS ff_fall_id, ff_auftrag_id, fortfuehrungsfallnummer, laufendenummer,  \'Fall: \' || fortfuehrungsfallnummer::text || \' altes Flst: \' ||  zeigtaufaltesflurstueck[1] AS fall_beschriftung, ueberschriftimfortfuehrungsnachweis,substring(zeigtaufaltesflurstueck[1], 7, 3)::integer as flur,(select array_to_string(array(select ltrim(substring(alte_flurst, 10, 5), \'0\')||CASE WHEN ltrim(substring(alte_flurst, 16, 3), \'0_\') != \'\' THEN \'/\'||ltrim(substring(alte_flurst, 16, 3), \'0_\') ELSE \'\' END from (select unnest(zeigtaufaltesflurstueck) as alte_flurst from ff_faelle ff2 where ff2.id = ff.id) as foo), \',\')) as alte_flurst,(select array_to_string(array(select ltrim(substring(neue_flurst, 10, 5), \'0\')||CASE WHEN ltrim(substring(neue_flurst, 16, 3), \'0_\') != \'\' THEN \'/\'||ltrim(substring(neue_flurst, 16, 3), \'0_\') ELSE \'\' END from (select unnest(zeigtaufneuesflurstueck) as neue_flurst from ff_faelle ff2 where ff2.id = ff.id) as foo ORDER BY neue_flurst), \',\')) as neue_flurst,zeigtaufaltesflurstueck, zeigtaufneuesflurstueck, anlassart as anlass_code, anlassart, anlassarten  FROM ff_faelle ff WHERE 1=1 ORDER BY alte_flurst','ff_faelle','','fortfuehrungslisten','','','','','',NULL,NULL,'',@connection,'','6','id','','10','pixels','25833','','1','100',NULL,'-1','-1','','EPSG:25833','','1.1.0','image/png','60','','','','','0','0','','','','','2');
SET @last_layer_id940084=LAST_INSERT_ID();
INSERT INTO layer_attributes (`layer_id`,`name`,`real_name`,`tablename`,`table_alias_name`,`type`,`geometrytype`,`constraints`,`nullable`,`length`,`decimal_length`,`default`,`form_element_type`,`options`,`alias`,`alias_low-german`,`alias_english`,`alias_polish`,`alias_vietnamese`,`tooltip`,`group`,`raster_visibility`,`mandatory`,`order`,`privileg`,`query_tooltip`) VALUES(@last_layer_id940084,'alte_flurst','','','','not_saveable','','',NULL,NULL,NULL,'','Text','','','','','','','','',NULL,'0','7','0','0');
INSERT INTO layer_attributes (`layer_id`,`name`,`real_name`,`tablename`,`table_alias_name`,`type`,`geometrytype`,`constraints`,`nullable`,`length`,`decimal_length`,`default`,`form_element_type`,`options`,`alias`,`alias_low-german`,`alias_english`,`alias_polish`,`alias_vietnamese`,`tooltip`,`group`,`raster_visibility`,`mandatory`,`order`,`privileg`,`query_tooltip`) VALUES(@last_layer_id940084,'anlass_code','anlassart','ff_faelle','ff','varchar','','','1',NULL,NULL,'','Text','','Anlass-Schlüssel','','','','','','',NULL,'0','11',NULL,'0');
INSERT INTO layer_attributes (`layer_id`,`name`,`real_name`,`tablename`,`table_alias_name`,`type`,`geometrytype`,`constraints`,`nullable`,`length`,`decimal_length`,`default`,`form_element_type`,`options`,`alias`,`alias_low-german`,`alias_english`,`alias_polish`,`alias_vietnamese`,`tooltip`,`group`,`raster_visibility`,`mandatory`,`order`,`privileg`,`query_tooltip`) VALUES(@last_layer_id940084,'anlassart','anlassart','ff_faelle','ff','varchar','','','1',NULL,NULL,'','Auswahlfeld','SELECT code AS value, \'(\' || code || \') \' || name as output from fortfuehrungslisten.aa_anlassart order by code','Anlassart des Fortführungsfalls','','','','','','',NULL,'0','12','1','0');
INSERT INTO layer_attributes (`layer_id`,`name`,`real_name`,`tablename`,`table_alias_name`,`type`,`geometrytype`,`constraints`,`nullable`,`length`,`decimal_length`,`default`,`form_element_type`,`options`,`alias`,`alias_low-german`,`alias_english`,`alias_polish`,`alias_vietnamese`,`tooltip`,`group`,`raster_visibility`,`mandatory`,`order`,`privileg`,`query_tooltip`) VALUES(@last_layer_id940084,'anlassarten','anlassarten','ff_faelle','ff','_varchar','','','1',NULL,NULL,'','Text','','Anlassarten der Flurücke','','','','','','',NULL,'0','13',NULL,'0');
INSERT INTO layer_attributes (`layer_id`,`name`,`real_name`,`tablename`,`table_alias_name`,`type`,`geometrytype`,`constraints`,`nullable`,`length`,`decimal_length`,`default`,`form_element_type`,`options`,`alias`,`alias_low-german`,`alias_english`,`alias_polish`,`alias_vietnamese`,`tooltip`,`group`,`raster_visibility`,`mandatory`,`order`,`privileg`,`query_tooltip`) VALUES(@last_layer_id940084,'fall_beschriftung',' fortfuehrungsfallnummer::text ','','','not_saveable','','',NULL,NULL,NULL,'','Text','','Beschriftung','','','','','','',NULL,'0','4','0','0');
INSERT INTO layer_attributes (`layer_id`,`name`,`real_name`,`tablename`,`table_alias_name`,`type`,`geometrytype`,`constraints`,`nullable`,`length`,`decimal_length`,`default`,`form_element_type`,`options`,`alias`,`alias_low-german`,`alias_english`,`alias_polish`,`alias_vietnamese`,`tooltip`,`group`,`raster_visibility`,`mandatory`,`order`,`privileg`,`query_tooltip`) VALUES(@last_layer_id940084,'ff_auftrag_id','ff_auftrag_id','ff_faelle','ff','int4','','','0','32','0','','Text','940083,ff_auftrag_id,embedded','Auftrag Id','','','','','','',NULL,'0','1','0','0');
INSERT INTO layer_attributes (`layer_id`,`name`,`real_name`,`tablename`,`table_alias_name`,`type`,`geometrytype`,`constraints`,`nullable`,`length`,`decimal_length`,`default`,`form_element_type`,`options`,`alias`,`alias_low-german`,`alias_english`,`alias_polish`,`alias_vietnamese`,`tooltip`,`group`,`raster_visibility`,`mandatory`,`order`,`privileg`,`query_tooltip`) VALUES(@last_layer_id940084,'ff_fall_id','id','ff_faelle','ff','int4','','PRIMARY KEY','1','32','0','','Text','','Fall Id','','','','','','',NULL,'0','0','0','0');
INSERT INTO layer_attributes (`layer_id`,`name`,`real_name`,`tablename`,`table_alias_name`,`type`,`geometrytype`,`constraints`,`nullable`,`length`,`decimal_length`,`default`,`form_element_type`,`options`,`alias`,`alias_low-german`,`alias_english`,`alias_polish`,`alias_vietnamese`,`tooltip`,`group`,`raster_visibility`,`mandatory`,`order`,`privileg`,`query_tooltip`) VALUES(@last_layer_id940084,'flur','zeigtaufaltesflurstueck[1],','','','not_saveable','','',NULL,NULL,NULL,'','Text','','','','','','','','',NULL,'0','6','0','0');
INSERT INTO layer_attributes (`layer_id`,`name`,`real_name`,`tablename`,`table_alias_name`,`type`,`geometrytype`,`constraints`,`nullable`,`length`,`decimal_length`,`default`,`form_element_type`,`options`,`alias`,`alias_low-german`,`alias_english`,`alias_polish`,`alias_vietnamese`,`tooltip`,`group`,`raster_visibility`,`mandatory`,`order`,`privileg`,`query_tooltip`) VALUES(@last_layer_id940084,'fortfuehrungsfallnummer','fortfuehrungsfallnummer','ff_faelle','ff','int4','','','0','32','0','','Text','','Fortführungsfallnummer','','','','','','',NULL,'0','2','1','0');
INSERT INTO layer_attributes (`layer_id`,`name`,`real_name`,`tablename`,`table_alias_name`,`type`,`geometrytype`,`constraints`,`nullable`,`length`,`decimal_length`,`default`,`form_element_type`,`options`,`alias`,`alias_low-german`,`alias_english`,`alias_polish`,`alias_vietnamese`,`tooltip`,`group`,`raster_visibility`,`mandatory`,`order`,`privileg`,`query_tooltip`) VALUES(@last_layer_id940084,'laufendenummer','laufendenummer','ff_faelle','ff','bpchar','','','0',NULL,NULL,'','Text','','lfd Nr.','','','','','','',NULL,'0','3','1','0');
INSERT INTO layer_attributes (`layer_id`,`name`,`real_name`,`tablename`,`table_alias_name`,`type`,`geometrytype`,`constraints`,`nullable`,`length`,`decimal_length`,`default`,`form_element_type`,`options`,`alias`,`alias_low-german`,`alias_english`,`alias_polish`,`alias_vietnamese`,`tooltip`,`group`,`raster_visibility`,`mandatory`,`order`,`privileg`,`query_tooltip`) VALUES(@last_layer_id940084,'neue_flurst','','','','not_saveable','','',NULL,NULL,NULL,'','Text','','','','','','','','',NULL,'0','8','0','0');
INSERT INTO layer_attributes (`layer_id`,`name`,`real_name`,`tablename`,`table_alias_name`,`type`,`geometrytype`,`constraints`,`nullable`,`length`,`decimal_length`,`default`,`form_element_type`,`options`,`alias`,`alias_low-german`,`alias_english`,`alias_polish`,`alias_vietnamese`,`tooltip`,`group`,`raster_visibility`,`mandatory`,`order`,`privileg`,`query_tooltip`) VALUES(@last_layer_id940084,'ueberschriftimfortfuehrungsnachweis','ueberschriftimfortfuehrungsnachweis','ff_faelle','ff','bpchar','','','1',NULL,NULL,'','Text','','Überschrift im Fortführungsnachweis','','','','','','',NULL,'0','5','1','0');
INSERT INTO layer_attributes (`layer_id`,`name`,`real_name`,`tablename`,`table_alias_name`,`type`,`geometrytype`,`constraints`,`nullable`,`length`,`decimal_length`,`default`,`form_element_type`,`options`,`alias`,`alias_low-german`,`alias_english`,`alias_polish`,`alias_vietnamese`,`tooltip`,`group`,`raster_visibility`,`mandatory`,`order`,`privileg`,`query_tooltip`) VALUES(@last_layer_id940084,'zeigtaufaltesflurstueck','zeigtaufaltesflurstueck','ff_faelle','ff','_varchar','','','1',NULL,NULL,'','Text','','alte Flurstücke','','','','','Beispiel: mit Nenner: 134141008000250001__ oder ohne Nenner: 13414100800025______','',NULL,'0','9','1','0');
INSERT INTO layer_attributes (`layer_id`,`name`,`real_name`,`tablename`,`table_alias_name`,`type`,`geometrytype`,`constraints`,`nullable`,`length`,`decimal_length`,`default`,`form_element_type`,`options`,`alias`,`alias_low-german`,`alias_english`,`alias_polish`,`alias_vietnamese`,`tooltip`,`group`,`raster_visibility`,`mandatory`,`order`,`privileg`,`query_tooltip`) VALUES(@last_layer_id940084,'zeigtaufneuesflurstueck','zeigtaufneuesflurstueck','ff_faelle','ff','_varchar','','','1',NULL,NULL,'','Text','','neue Flurstücke','','','','','','',NULL,'0','10','1','0');

INSERT INTO layer (`Name`,`alias`,`Datentyp`,`Gruppe`,`pfad`,`maintable`,`Data`,`schema`,`document_path`,`tileindex`,`tileitem`,`labelangleitem`,`labelitem`,`labelmaxscale`,`labelminscale`,`labelrequires`,`connection`,`printconnection`,`connectiontype`,`classitem`,`filteritem`,`tolerance`,`toleranceunits`,`epsg_code`,`template`,`queryable`,`transparency`,`drawingorder`,`minscale`,`maxscale`,`offsite`,`ows_srs`,`wms_name`,`wms_server_version`,`wms_format`,`wms_connectiontimeout`,`wms_auth_username`,`wms_auth_password`,`wfs_geom`,`selectiontype`,`querymap`,`logconsume`,`processing`,`kurzbeschreibung`,`datenherr`,`metalink`,`privileg`) VALUES('Fortführungslisten Gemarkungen','','5',@group_id,'SELECT oid, gemeindename, gemkgnr, jahr, \'\' as nachweise FROM gemarkungen WHERE 1=1','gemarkungen','','fortfuehrungslisten','','','','','',NULL,NULL,'',@connection,'','6','id','','10','pixels','25833','','1','100',NULL,'-1','-1','','EPSG:25833','','1.1.0','image/png','60','','','','','0','0','','','','','0');
SET @last_layer_id940086=LAST_INSERT_ID();
INSERT INTO layer_attributes (`layer_id`,`name`,`real_name`,`tablename`,`table_alias_name`,`type`,`geometrytype`,`constraints`,`nullable`,`length`,`decimal_length`,`default`,`form_element_type`,`options`,`alias`,`alias_low-german`,`alias_english`,`alias_polish`,`alias_vietnamese`,`tooltip`,`group`,`raster_visibility`,`mandatory`,`order`,`privileg`,`query_tooltip`) VALUES(@last_layer_id940086,'gemeindename','gemeindename','gemarkungen','gemarkungen','varchar','','','1','80',NULL,'','Text','','Gemeindename','','','','','','',NULL,'0','1','0','0');
INSERT INTO layer_attributes (`layer_id`,`name`,`real_name`,`tablename`,`table_alias_name`,`type`,`geometrytype`,`constraints`,`nullable`,`length`,`decimal_length`,`default`,`form_element_type`,`options`,`alias`,`alias_low-german`,`alias_english`,`alias_polish`,`alias_vietnamese`,`tooltip`,`group`,`raster_visibility`,`mandatory`,`order`,`privileg`,`query_tooltip`) VALUES(@last_layer_id940086,'gemkgnr','gemkgnr','gemarkungen','gemarkungen','int4','','','1','32','0','','Auswahlfeld','SELECT * FROM (
select gemarkung as value, coalesce(gemarkungsname, \'\') || \' (\' || gemarkung || \')\' as output from alkis.pp_gemarkung
union
select gemarkung as value, gemarkung || \' (\' || coalesce(gemarkungsname, \'\') || \')\' as output from alkis.pp_gemarkung
) gem
ORDER BY output','Gemarkung','','','','','','',NULL,'0','2','0','0');
INSERT INTO layer_attributes (`layer_id`,`name`,`real_name`,`tablename`,`table_alias_name`,`type`,`geometrytype`,`constraints`,`nullable`,`length`,`decimal_length`,`default`,`form_element_type`,`options`,`alias`,`alias_low-german`,`alias_english`,`alias_polish`,`alias_vietnamese`,`tooltip`,`group`,`raster_visibility`,`mandatory`,`order`,`privileg`,`query_tooltip`) VALUES(@last_layer_id940086,'jahr','jahr','gemarkungen','gemarkungen','int4','','','1','32','0','','Auswahlfeld','SELECT jahr as value, jahr AS output FROM (
SELECT extract(year from current_timestamp) - generate_series(0, (extract(year from current_timestamp)-1950)::integer) AS jahr) AS foo','Jahr','','','','','','',NULL,'1','3','0','0');
INSERT INTO layer_attributes (`layer_id`,`name`,`real_name`,`tablename`,`table_alias_name`,`type`,`geometrytype`,`constraints`,`nullable`,`length`,`decimal_length`,`default`,`form_element_type`,`options`,`alias`,`alias_low-german`,`alias_english`,`alias_polish`,`alias_vietnamese`,`tooltip`,`group`,`raster_visibility`,`mandatory`,`order`,`privileg`,`query_tooltip`) VALUES(@last_layer_id940086,'nachweise','','','','not_saveable','','',NULL,NULL,NULL,'','SubFormEmbeddedPK','940083,gemkgnr,jahr,fnnr - antragsnr;embedded','Fortführungsnachweise','','','','','','',NULL,'0','4','0','0');
INSERT INTO layer_attributes (`layer_id`,`name`,`real_name`,`tablename`,`table_alias_name`,`type`,`geometrytype`,`constraints`,`nullable`,`length`,`decimal_length`,`default`,`form_element_type`,`options`,`alias`,`alias_low-german`,`alias_english`,`alias_polish`,`alias_vietnamese`,`tooltip`,`group`,`raster_visibility`,`mandatory`,`order`,`privileg`,`query_tooltip`) VALUES(@last_layer_id940086,'oid','oid','gemarkungen','gemarkungen','int8','','','1','64','0','','Text','','','','','','','','',NULL,'0','0','0','0');

INSERT INTO layer (`Name`,`alias`,`Datentyp`,`Gruppe`,`pfad`,`maintable`,`Data`,`schema`,`document_path`,`tileindex`,`tileitem`,`labelangleitem`,`labelitem`,`labelmaxscale`,`labelminscale`,`labelrequires`,`connection`,`printconnection`,`connectiontype`,`classitem`,`filteritem`,`tolerance`,`toleranceunits`,`epsg_code`,`template`,`queryable`,`transparency`,`drawingorder`,`minscale`,`maxscale`,`offsite`,`ows_srs`,`wms_name`,`wms_server_version`,`wms_format`,`wms_connectiontimeout`,`wms_auth_username`,`wms_auth_password`,`wfs_geom`,`selectiontype`,`querymap`,`logconsume`,`processing`,`kurzbeschreibung`,`datenherr`,`metalink`,`privileg`) VALUES('Fortführungsnachweise','','5',@group_id,'SELECT a.gemkgnr, a.jahr, a.lfdnr, gesperrt, a.gemkgnr || lpad(a.lfdnr::text, 3, \'0\') || right(a.jahr::text, 2) AS fnnr, a.antragsnr, an_pruefen, a.bemerkung, a.created_at, a.updated_at, a.user_name, a.auftragsdatei, \'\' AS auftragsdatei_einlesen, a.datumderausgabe, a.profilkennung, a.auftragsnummer, a.impliziteloeschungderreservierung, a.verarbeitungsart, a.geometriebehandlung, a.mitTemporaeremArbeitsbereich, a.mitObjektenImFortfuehrungsgebiet, a.mitFortfuehrungsnachweis, coalesce(aa.name, \'\') as gebaeude, \'\' AS ff_faelle, a.oid, a.id AS ff_auftrag_id FROM ff_auftraege a left join aa_anlassart aa on a.gebaeude = aa.code where 1=1 order by fnnr','ff_auftraege','','fortfuehrungslisten','/var/www/data/nachweise/fortfuehrungsauftraege/','','','','',NULL,NULL,'',@connection,'','6','id','','10','pixels','25833','','1','100',NULL,'-1','-1','','EPSG:25833','','1.1.0','image/png','60','','','','','0','0','','','','','2');
SET @last_layer_id940083=LAST_INSERT_ID();
INSERT INTO layer_attributes (`layer_id`,`name`,`real_name`,`tablename`,`table_alias_name`,`type`,`geometrytype`,`constraints`,`nullable`,`length`,`decimal_length`,`default`,`form_element_type`,`options`,`alias`,`alias_low-german`,`alias_english`,`alias_polish`,`alias_vietnamese`,`tooltip`,`group`,`raster_visibility`,`mandatory`,`order`,`privileg`,`query_tooltip`) VALUES(@last_layer_id940083,'an_pruefen','an_pruefen','ff_auftraege','a','bool','','','0',NULL,NULL,'SELECT true','Checkbox','','prüfen','','','','','','Auftrag',NULL,'-1','6','1','0');
INSERT INTO layer_attributes (`layer_id`,`name`,`real_name`,`tablename`,`table_alias_name`,`type`,`geometrytype`,`constraints`,`nullable`,`length`,`decimal_length`,`default`,`form_element_type`,`options`,`alias`,`alias_low-german`,`alias_english`,`alias_polish`,`alias_vietnamese`,`tooltip`,`group`,`raster_visibility`,`mandatory`,`order`,`privileg`,`query_tooltip`) VALUES(@last_layer_id940083,'antragsnr','antragsnr','ff_auftraege','a','int4','','','0','32','0','','Text','','Antragsnr.','','','','','','Auftrag',NULL,'0','5','1','0');
INSERT INTO layer_attributes (`layer_id`,`name`,`real_name`,`tablename`,`table_alias_name`,`type`,`geometrytype`,`constraints`,`nullable`,`length`,`decimal_length`,`default`,`form_element_type`,`options`,`alias`,`alias_low-german`,`alias_english`,`alias_polish`,`alias_vietnamese`,`tooltip`,`group`,`raster_visibility`,`mandatory`,`order`,`privileg`,`query_tooltip`) VALUES(@last_layer_id940083,'auftragsdatei','auftragsdatei','ff_auftraege','a','varchar','','','1',NULL,NULL,'','Dokument','','Auftragsdatei','','','','','NAS-Datei mit Fortführungsauftrag im XML-Format','Fortführungsdaten;collapse',NULL,'0','11','1','0');
INSERT INTO layer_attributes (`layer_id`,`name`,`real_name`,`tablename`,`table_alias_name`,`type`,`geometrytype`,`constraints`,`nullable`,`length`,`decimal_length`,`default`,`form_element_type`,`options`,`alias`,`alias_low-german`,`alias_english`,`alias_polish`,`alias_vietnamese`,`tooltip`,`group`,`raster_visibility`,`mandatory`,`order`,`privileg`,`query_tooltip`) VALUES(@last_layer_id940083,'auftragsdatei_einlesen','','','','not_saveable','','',NULL,NULL,NULL,'','dynamicLink','index.php?go=lade_fortfuehrungsfaelle&ff_auftrag_id=$ff_auftrag_id&auftragsdatei=$auftragsdatei;Fortführungsfälle laden;no_new_window;all_not_null','','','','','','','Fortführungsdaten;collapse',NULL,'0','12','0','0');
INSERT INTO layer_attributes (`layer_id`,`name`,`real_name`,`tablename`,`table_alias_name`,`type`,`geometrytype`,`constraints`,`nullable`,`length`,`decimal_length`,`default`,`form_element_type`,`options`,`alias`,`alias_low-german`,`alias_english`,`alias_polish`,`alias_vietnamese`,`tooltip`,`group`,`raster_visibility`,`mandatory`,`order`,`privileg`,`query_tooltip`) VALUES(@last_layer_id940083,'auftragsnummer','auftragsnummer','ff_auftraege','a','varchar','','','1',NULL,NULL,'','Zahl','','Auftragsnummer','','','','','','Fortführungsdaten;collapse',NULL,'0','15','1','0');
INSERT INTO layer_attributes (`layer_id`,`name`,`real_name`,`tablename`,`table_alias_name`,`type`,`geometrytype`,`constraints`,`nullable`,`length`,`decimal_length`,`default`,`form_element_type`,`options`,`alias`,`alias_low-german`,`alias_english`,`alias_polish`,`alias_vietnamese`,`tooltip`,`group`,`raster_visibility`,`mandatory`,`order`,`privileg`,`query_tooltip`) VALUES(@last_layer_id940083,'bemerkung','bemerkung','ff_auftraege','a','text','','','1',NULL,NULL,'','Textfeld','','Bemerkung','','','','','','Auftrag',NULL,'0','7','1','0');
INSERT INTO layer_attributes (`layer_id`,`name`,`real_name`,`tablename`,`table_alias_name`,`type`,`geometrytype`,`constraints`,`nullable`,`length`,`decimal_length`,`default`,`form_element_type`,`options`,`alias`,`alias_low-german`,`alias_english`,`alias_polish`,`alias_vietnamese`,`tooltip`,`group`,`raster_visibility`,`mandatory`,`order`,`privileg`,`query_tooltip`) VALUES(@last_layer_id940083,'created_at','created_at','ff_auftraege','a','date','','','0',NULL,NULL,'SELECT (\'now\'::text)::date','Text','','erstellt am:','','','','','','Auftrag',NULL,'0','8','0','0');
INSERT INTO layer_attributes (`layer_id`,`name`,`real_name`,`tablename`,`table_alias_name`,`type`,`geometrytype`,`constraints`,`nullable`,`length`,`decimal_length`,`default`,`form_element_type`,`options`,`alias`,`alias_low-german`,`alias_english`,`alias_polish`,`alias_vietnamese`,`tooltip`,`group`,`raster_visibility`,`mandatory`,`order`,`privileg`,`query_tooltip`) VALUES(@last_layer_id940083,'datumderausgabe','datumderausgabe','ff_auftraege','a','date','','','1',NULL,NULL,'','Text','','Datum der Ausgabe','','','','','','Fortführungsdaten;collapse',NULL,'0','13','1','0');
INSERT INTO layer_attributes (`layer_id`,`name`,`real_name`,`tablename`,`table_alias_name`,`type`,`geometrytype`,`constraints`,`nullable`,`length`,`decimal_length`,`default`,`form_element_type`,`options`,`alias`,`alias_low-german`,`alias_english`,`alias_polish`,`alias_vietnamese`,`tooltip`,`group`,`raster_visibility`,`mandatory`,`order`,`privileg`,`query_tooltip`) VALUES(@last_layer_id940083,'ff_auftrag_id','id','ff_auftraege','a','int4','','PRIMARY KEY','1','32','0','','Text','','Auftrag Id','','','','','','Intern;collapse',NULL,'0','25','0','0');
INSERT INTO layer_attributes (`layer_id`,`name`,`real_name`,`tablename`,`table_alias_name`,`type`,`geometrytype`,`constraints`,`nullable`,`length`,`decimal_length`,`default`,`form_element_type`,`options`,`alias`,`alias_low-german`,`alias_english`,`alias_polish`,`alias_vietnamese`,`tooltip`,`group`,`raster_visibility`,`mandatory`,`order`,`privileg`,`query_tooltip`) VALUES(@last_layer_id940083,'ff_faelle','','','','not_saveable','','',NULL,NULL,NULL,'','SubFormEmbeddedPK','940084,ff_auftrag_id,fall_beschriftung;embedded','Fortführungsfälle','','','','','','Fortführungsfälle;collapse',NULL,'0','23','0','0');
INSERT INTO layer_attributes (`layer_id`,`name`,`real_name`,`tablename`,`table_alias_name`,`type`,`geometrytype`,`constraints`,`nullable`,`length`,`decimal_length`,`default`,`form_element_type`,`options`,`alias`,`alias_low-german`,`alias_english`,`alias_polish`,`alias_vietnamese`,`tooltip`,`group`,`raster_visibility`,`mandatory`,`order`,`privileg`,`query_tooltip`) VALUES(@last_layer_id940083,'fnnr','','','','not_saveable','','',NULL,NULL,NULL,'','Text','','FN-Nr.','','','','','','Auftrag',NULL,'0','4','0','0');
INSERT INTO layer_attributes (`layer_id`,`name`,`real_name`,`tablename`,`table_alias_name`,`type`,`geometrytype`,`constraints`,`nullable`,`length`,`decimal_length`,`default`,`form_element_type`,`options`,`alias`,`alias_low-german`,`alias_english`,`alias_polish`,`alias_vietnamese`,`tooltip`,`group`,`raster_visibility`,`mandatory`,`order`,`privileg`,`query_tooltip`) VALUES(@last_layer_id940083,'gebaeude','aa.name,','ff_auftraege','a','not_saveable','','',NULL,NULL,NULL,'','Text','','Änderungen am Gebäudebestand','','','','','','Fortführungsdaten;collapse',NULL,'0','22','1','0');
INSERT INTO layer_attributes (`layer_id`,`name`,`real_name`,`tablename`,`table_alias_name`,`type`,`geometrytype`,`constraints`,`nullable`,`length`,`decimal_length`,`default`,`form_element_type`,`options`,`alias`,`alias_low-german`,`alias_english`,`alias_polish`,`alias_vietnamese`,`tooltip`,`group`,`raster_visibility`,`mandatory`,`order`,`privileg`,`query_tooltip`) VALUES(@last_layer_id940083,'gemkgnr','gemkgnr','ff_auftraege','a','int4','','','0','32','0','','Auswahlfeld','SELECT * FROM (
select gemarkung as value, coalesce(gemarkungsname, \'\') || \' (\' || gemarkung || \')\' as output from alkis.pp_gemarkung
union
select gemarkung as value, gemarkung || \' (\' || coalesce(gemarkungsname, \'\') || \')\' as output from alkis.pp_gemarkung
) gem
ORDER BY output','Gemarkung','','','','','','Auftrag',NULL,'0','0','1','0');
INSERT INTO layer_attributes (`layer_id`,`name`,`real_name`,`tablename`,`table_alias_name`,`type`,`geometrytype`,`constraints`,`nullable`,`length`,`decimal_length`,`default`,`form_element_type`,`options`,`alias`,`alias_low-german`,`alias_english`,`alias_polish`,`alias_vietnamese`,`tooltip`,`group`,`raster_visibility`,`mandatory`,`order`,`privileg`,`query_tooltip`) VALUES(@last_layer_id940083,'geometriebehandlung','geometriebehandlung','ff_auftraege','a','bool','','','1',NULL,NULL,'','Auswahlfeld','select false as value, \'nein\' as output UNION select true as value, \'ja\' as output','Geometriebehandlung','','','','','','Fortführungsdaten;collapse',NULL,'0','18',NULL,'0');
INSERT INTO layer_attributes (`layer_id`,`name`,`real_name`,`tablename`,`table_alias_name`,`type`,`geometrytype`,`constraints`,`nullable`,`length`,`decimal_length`,`default`,`form_element_type`,`options`,`alias`,`alias_low-german`,`alias_english`,`alias_polish`,`alias_vietnamese`,`tooltip`,`group`,`raster_visibility`,`mandatory`,`order`,`privileg`,`query_tooltip`) VALUES(@last_layer_id940083,'gesperrt','gesperrt','ff_auftraege','a','bool','','','0',NULL,NULL,'SELECT false','Checkbox','','','','','','','','Auftrag',NULL,'-1','3','1','0');
INSERT INTO layer_attributes (`layer_id`,`name`,`real_name`,`tablename`,`table_alias_name`,`type`,`geometrytype`,`constraints`,`nullable`,`length`,`decimal_length`,`default`,`form_element_type`,`options`,`alias`,`alias_low-german`,`alias_english`,`alias_polish`,`alias_vietnamese`,`tooltip`,`group`,`raster_visibility`,`mandatory`,`order`,`privileg`,`query_tooltip`) VALUES(@last_layer_id940083,'impliziteloeschungderreservierung','impliziteloeschungderreservierung','ff_auftraege','a','int4','','','1','32','0','','Zahl','','implizite Löschung der Reservierung','','','','','','Fortführungsdaten;collapse',NULL,'0','16',NULL,'0');
INSERT INTO layer_attributes (`layer_id`,`name`,`real_name`,`tablename`,`table_alias_name`,`type`,`geometrytype`,`constraints`,`nullable`,`length`,`decimal_length`,`default`,`form_element_type`,`options`,`alias`,`alias_low-german`,`alias_english`,`alias_polish`,`alias_vietnamese`,`tooltip`,`group`,`raster_visibility`,`mandatory`,`order`,`privileg`,`query_tooltip`) VALUES(@last_layer_id940083,'jahr','jahr','ff_auftraege','a','int4','','','0','32','0','SELECT date_part(\'year\'::text, now())','Auswahlfeld','SELECT jahr as value, jahr AS output FROM (
SELECT extract(year from current_timestamp) - generate_series(0, (extract(year from current_timestamp)-1950)::integer) AS jahr) AS foo','Fortführungsjahr','','','','','','Auftrag',NULL,'0','1','1','0');
INSERT INTO layer_attributes (`layer_id`,`name`,`real_name`,`tablename`,`table_alias_name`,`type`,`geometrytype`,`constraints`,`nullable`,`length`,`decimal_length`,`default`,`form_element_type`,`options`,`alias`,`alias_low-german`,`alias_english`,`alias_polish`,`alias_vietnamese`,`tooltip`,`group`,`raster_visibility`,`mandatory`,`order`,`privileg`,`query_tooltip`) VALUES(@last_layer_id940083,'lfdnr','lfdnr','ff_auftraege','a','int4','','','1','32','0','','Text','','LfdNr.','','','','','Die laufende Nummer pro Fortführungsjahr und Gemarkung. Beim neu anlegen eines Nachweises wird diese Nummer automatisch vergeben und muss nicht eingetragen werden.','Auftrag',NULL,'-1','2','1','0');
INSERT INTO layer_attributes (`layer_id`,`name`,`real_name`,`tablename`,`table_alias_name`,`type`,`geometrytype`,`constraints`,`nullable`,`length`,`decimal_length`,`default`,`form_element_type`,`options`,`alias`,`alias_low-german`,`alias_english`,`alias_polish`,`alias_vietnamese`,`tooltip`,`group`,`raster_visibility`,`mandatory`,`order`,`privileg`,`query_tooltip`) VALUES(@last_layer_id940083,'mitfortfuehrungsnachweis','mitfortfuehrungsnachweis','ff_auftraege','a','bool','','','1',NULL,NULL,'','Auswahlfeld','select false as value, \'nein\' as output UNION select true as value, \'ja\' as output','mit Fortführungsnachweis','','','','','','Fortführungsdaten;collapse',NULL,'0','21',NULL,'0');
INSERT INTO layer_attributes (`layer_id`,`name`,`real_name`,`tablename`,`table_alias_name`,`type`,`geometrytype`,`constraints`,`nullable`,`length`,`decimal_length`,`default`,`form_element_type`,`options`,`alias`,`alias_low-german`,`alias_english`,`alias_polish`,`alias_vietnamese`,`tooltip`,`group`,`raster_visibility`,`mandatory`,`order`,`privileg`,`query_tooltip`) VALUES(@last_layer_id940083,'mitobjektenimfortfuehrungsgebiet','mitobjektenimfortfuehrungsgebiet','ff_auftraege','a','bool','','','1',NULL,NULL,'','Auswahlfeld','select false as value, \'nein\' as output UNION select true as value, \'ja\' as output','mit Objekt im Fortführungsgebiet','','','','','','Fortführungsdaten;collapse',NULL,'0','20',NULL,'0');
INSERT INTO layer_attributes (`layer_id`,`name`,`real_name`,`tablename`,`table_alias_name`,`type`,`geometrytype`,`constraints`,`nullable`,`length`,`decimal_length`,`default`,`form_element_type`,`options`,`alias`,`alias_low-german`,`alias_english`,`alias_polish`,`alias_vietnamese`,`tooltip`,`group`,`raster_visibility`,`mandatory`,`order`,`privileg`,`query_tooltip`) VALUES(@last_layer_id940083,'mittemporaeremarbeitsbereich','mittemporaeremarbeitsbereich','ff_auftraege','a','bool','','','1',NULL,NULL,'','Auswahlfeld','select false as value, \'nein\' as output UNION select true as value, \'ja\' as output','mit temporärem Arbeitsbereich','','','','','','Fortführungsdaten;collapse',NULL,'0','19',NULL,'0');
INSERT INTO layer_attributes (`layer_id`,`name`,`real_name`,`tablename`,`table_alias_name`,`type`,`geometrytype`,`constraints`,`nullable`,`length`,`decimal_length`,`default`,`form_element_type`,`options`,`alias`,`alias_low-german`,`alias_english`,`alias_polish`,`alias_vietnamese`,`tooltip`,`group`,`raster_visibility`,`mandatory`,`order`,`privileg`,`query_tooltip`) VALUES(@last_layer_id940083,'oid','oid','ff_auftraege','a','','','',NULL,NULL,NULL,'','Text','','OID','','','','','','Intern;collapse',NULL,'0','24','0','0');
INSERT INTO layer_attributes (`layer_id`,`name`,`real_name`,`tablename`,`table_alias_name`,`type`,`geometrytype`,`constraints`,`nullable`,`length`,`decimal_length`,`default`,`form_element_type`,`options`,`alias`,`alias_low-german`,`alias_english`,`alias_polish`,`alias_vietnamese`,`tooltip`,`group`,`raster_visibility`,`mandatory`,`order`,`privileg`,`query_tooltip`) VALUES(@last_layer_id940083,'profilkennung','profilkennung','ff_auftraege','a','varchar','','','1',NULL,NULL,'','Text','','Profilkennung','','','','','','Fortführungsdaten;collapse',NULL,'0','14','0','0');
INSERT INTO layer_attributes (`layer_id`,`name`,`real_name`,`tablename`,`table_alias_name`,`type`,`geometrytype`,`constraints`,`nullable`,`length`,`decimal_length`,`default`,`form_element_type`,`options`,`alias`,`alias_low-german`,`alias_english`,`alias_polish`,`alias_vietnamese`,`tooltip`,`group`,`raster_visibility`,`mandatory`,`order`,`privileg`,`query_tooltip`) VALUES(@last_layer_id940083,'updated_at','updated_at','ff_auftraege','a','date','','','0',NULL,NULL,'SELECT (\'now\'::text)::date','Time','','geändert am:','','','','','','Auftrag',NULL,'0','9','0','0');
INSERT INTO layer_attributes (`layer_id`,`name`,`real_name`,`tablename`,`table_alias_name`,`type`,`geometrytype`,`constraints`,`nullable`,`length`,`decimal_length`,`default`,`form_element_type`,`options`,`alias`,`alias_low-german`,`alias_english`,`alias_polish`,`alias_vietnamese`,`tooltip`,`group`,`raster_visibility`,`mandatory`,`order`,`privileg`,`query_tooltip`) VALUES(@last_layer_id940083,'user_name','user_name','ff_auftraege','a','varchar','','','0',NULL,NULL,'','User','','bearbeitet von:','','','','','','Auftrag',NULL,'0','10','0','0');
INSERT INTO layer_attributes (`layer_id`,`name`,`real_name`,`tablename`,`table_alias_name`,`type`,`geometrytype`,`constraints`,`nullable`,`length`,`decimal_length`,`default`,`form_element_type`,`options`,`alias`,`alias_low-german`,`alias_english`,`alias_polish`,`alias_vietnamese`,`tooltip`,`group`,`raster_visibility`,`mandatory`,`order`,`privileg`,`query_tooltip`) VALUES(@last_layer_id940083,'verarbeitungsart','verarbeitungsart','ff_auftraege','a','int4','','','1','32','0','','Zahl','','Verarbeitungsart','','','','','','Fortführungsdaten;collapse',NULL,'0','17',NULL,'0');

UPDATE layer_attributes SET options = REPLACE(options, '940084', @last_layer_id940084) WHERE layer_id IN(@last_layer_id940084, @last_layer_id940086, @last_layer_id940083) AND form_element_type IN ('SubFormPK', 'SubFormFK', 'SubFormEmbeddedPK', 'Autovervollständigungsfeld', 'Auswahlfeld');
UPDATE layer_attributes SET options = REPLACE(options, '940086', @last_layer_id940086) WHERE layer_id IN(@last_layer_id940084, @last_layer_id940086, @last_layer_id940083) AND form_element_type IN ('SubFormPK', 'SubFormFK', 'SubFormEmbeddedPK', 'Autovervollständigungsfeld', 'Auswahlfeld');
UPDATE layer_attributes SET options = REPLACE(options, '940083', @last_layer_id940083) WHERE layer_id IN(@last_layer_id940084, @last_layer_id940086, @last_layer_id940083) AND form_element_type IN ('SubFormPK', 'SubFormFK', 'SubFormEmbeddedPK', 'Autovervollständigungsfeld', 'Auswahlfeld');
